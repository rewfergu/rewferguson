---
import { Icon } from 'astro-icon/components';
import { twMerge } from 'tailwind-merge';
import arc from '~/assets/images/arc-pattern.svg?raw';

const { title, company, dates, icon, logo } = Astro.props;
---

<div class="flex group">
  <div class="flex flex-col items-center mr-4 rtl:mr-0 rtl:ml-4">
    <div>
      <div class="flex items-center justify-center">
        {
          logo ? (
            <div class="w-10 h-10">
              <Fragment set:html={logo} />
            </div>
          ) : (
            <Icon name={icon} class="w-10 h-10 p-2 rounded-full border-2 border-primary" />
          )
        }
      </div>
    </div>
    <div class="flex items-start h-full group-last:opacity-0 w-4 arcContainer text-black/10 dark:text-primary">
      <Fragment set:html={arc} height="100%" />
    </div>
  </div>
  <div>
    <div class="text-xl font-bold" set:html={title} />
    <div class="text-xl font-normal" set:html={company} />
    <div set:html={dates} />
    <div class="mt-4 mb-12 text-md">
      <slot />
    </div>
  </div>
</div>

<!-- <script>
  (() => {
    const arcContainer = document.querySelector('.arcContainer');
    if (arcContainer === null) return;

    const containerHeight = arcContainer.clientHeight;
    console.log('containerHeight', containerHeight);
    const arc = arcContainer.querySelector('svg');

    if (arc === null) return;

    // arc.setAttribute('height', arcContainer.clientHeight.toString());
    const viewBox = arc.getAttribute('viewBox').split(' ');
    viewBox[3] = containerHeight * 2;
    arc.setAttribute('viewBox', viewBox.join(' '));
  })();
</script> -->
